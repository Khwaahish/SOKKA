{% extends "profiles/base.html" %}
{% block content %}
<div class="card section-card">
  <div class="card-body">
    <h2>My Job Applications</h2>
    
    {% if applications %}
    <div class="table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th>Job Title</th>
            <th>Company</th>
            <th>Applied Date</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for application in applications %}
          <tr>
            <td>{{ application.job.title }}</td>
            <td>{{ application.job.posted_by.get_full_name }}</td>
            <td>{{ application.applied_at|date:"M d, Y" }}</td>
            <td>
              <span class="badge {% if application.status == 'offer' %}bg-success{% elif application.status == 'closed' %}bg-secondary{% else %}bg-info{% endif %}">
                {{ application.status_display }}
              </span>
              {% if application.kanban_card %}
              <br>
              <small class="text-muted">{{ application.kanban_card.stage.get_name_display }}</small>
              {% endif %}
            </td>
            <td>
              <a href="{% url 'jobs:detail' application.job.pk %}" class="btn btn-sm btn-outline-primary">View Job</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="alert alert-info">
      You haven't applied to any jobs yet. 
      <a href="{% url 'jobs:list' %}" class="alert-link">Browse available jobs</a>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}